<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="fragments/header :: header">
    <meta charset="UTF-8">
    <title>상세 보기</title>
</head>
<body>
<div th:replace="fragments/bodyHeader :: bodyHeader" />
<div class="container">
<h1>상세 보기</h1>
<div>
    <h2 th:text="'제목: ' + ${article.title}"></h2>
    <p th:utext="${#strings.replace(article.description, '&#10;', '&lt;br /&gt;')}"></p>
    <p th:text="'작성자: ' + ${article.author}"></p>
    <p th:text="'작성 시간: ' + ${article.createdDate}"></p>
    <p th:text="'방문자 수: ' + ${article.visitCount}"></p>
    <div th:if="${session.id} == ${article.memberId}">
        <a th:href="@{/update(id=${article.id})}">글 수정</a>
        <a th:href="@{/delete(id=${article.id})}">글 삭제</a>
    </div>
</div>

<h1>댓글 목록</h1>
<div th:each="comment : ${comments}">
    <div th:if="${session.id}">
        <p th:text="'작성자: ' + ${comment.member.name}"></p>
        <p th:text="'작성 시간: ' + ${comment.timestamps.createdDate}"></p>
        <p th:text="${comment.description}"></p>
        <a th:href="@{/updateComment(id=${article.id}, updateCommentId=${comment.id})}">댓글 수정</a>
        <a th:href="@{/deleteComment(commentId=${comment.id}, articleId=${article.id})}">댓글 삭제</a>
    </div>
</div>
<div th:replace="comment/commentForm :: commentForm" />
<div th:replace="fragments/footer :: footer" />
</div>
</body>
</html>